{{ $src := .Resources.GetMatch (index .Params.images 0 ) }}
{{ $sizes := slice "500" "800" "1200"}}

<img class="page-image grid--full" sizes="100vw,(min-width: 768px) 1200px" srcset='
    {{ range $sizes}}

      {{/* Hugo will upscale the image if it's smaller then the given size */}}
      {{ if ge $src.Width (string . ) }}
        {{ $img := $src.Resize (printf "%sx" . )}}
        {{ $img.RelPermalink }} {{ . }}w,
      {{end}}

    {{ end }}
    ' src="{{ $src.RelPermalink }}" alt="featured image">